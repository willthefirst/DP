var TrackConfig={mediaStream:{},recordRTC:{},beats:4,bpm:140,interval:0,init:function(){this.getInterval(),this.getRecordRTC()},getInterval:function(){this.interval=1e3*(60*this.beats/this.bpm)},getRecordRTC:function(){$.getScript("https://www.webrtc-experiment.com/RecordRTC.js",function(){TrackConfig.setUpCam()})},hasGetUserMedia:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},setUpCam:function(){var a=function(){alert("Without a webcam, this site won't do much for you :(")};window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var b=document.querySelector("video");navigator.getUserMedia&&navigator.getUserMedia({video:!0},function(a){b.src=window.URL.createObjectURL(a);var c={type:"video",video:{width:320,height:240},canvas:{width:320,height:240}};TrackConfig.recordRTC=RecordRTC(a,c),$("#play").on("click",function(){}),$("#stop").on("click",function(){TrackConfig.recordRTC.stopRecording(function(a){window.open(a)})}),$("#record-auto").on("click",function(){console.log(TrackConfig.interval),TrackConfig.recordRTC.startRecording(),setTimeout(function(){TrackConfig.recordRTC.stopRecording(function(a){window.open(a)})},TrackConfig.interval)})},a)}};jQuery(document).ready(function(){TrackConfig.hasGetUserMedia()?TrackConfig.init():alert("getUserMedia() is not supported in your browser")});