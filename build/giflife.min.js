var TrackConfig={init:function(){this.createAudioContext(),this.controls()},track_url:"audio/glbtm.mp3",context:{},buffer:{},source:{},beat_count:0,createAudioContext:function(){try{window.AudioContext=window.AudioContext||window.webkitAudioContext,this.context=new AudioContext;var a=new XMLHttpRequest;a.open("GET",TrackConfig.track_url,!0),a.responseType="arraybuffer",a.onload=function(){TrackConfig.context.decodeAudioData(a.response,function(a){TrackConfig.buffer=a,console.log(TrackConfig.buffer),TrackConfig.playTrack()})},a.send()}catch(b){alert("Web Audio API is not supported in this browser")}},playTrack:function(){this.source=this.context.createBufferSource(),this.source.buffer=this.buffer,this.source.connect(this.context.destination),this.source.start(0),this.startMetronome()},stopTrack:function(){this.source.stop(0)},controls:function(){var a=!1;$(".container").click(function(){a?(TrackConfig.stopTrack(),a=!1):(TrackConfig.playTrack(),a=!0)})},startMetronome:function(){$(".container");var a=0;window.setInterval(function(){a="beat_"+TrackConfig.beat_count+"()",TrackConfig.beatQueue.current_beat,TrackConfig.beat_count++},512.82051)},beatQueue:{beat_1:function(){alert("success"),container.toggleClass("red")},beat_2:function(){}}};jQuery(document).ready(function(){TrackConfig.init()});