var TrackConfig={stream:{},recordRTC:{},bpm:133,init:function(){this.dependencies()},dependencies:function(){window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,navigator.getUserMedia&&$.getScript("https://www.webrtc-experiment.com/RecordRTC.js",function(){var a=function(){alert("Without a webcam, this site won't do much for you :(")};navigator.getUserMedia({video:!0},function(a){TrackConfig.stream=a,TrackConfig.setupControls()},a)})},setupCam:function(a){a.src=window.URL.createObjectURL(TrackConfig.stream);var b={type:"video",video:{width:640,height:480},canvas:{width:640,height:480}};TrackConfig.recordRTC=RecordRTC(TrackConfig.stream,b)},setupControls:function(){$(".beat-4").on("click",function(){var a=$(this).parent().siblings(".usr-dance");console.log(a),TrackConfig.setupCam(a),TrackConfig.autoRecord(4,TrackConfig.bpm,a)}),$(".beat-8").on("click",function(){TrackConfig.autoRecord(8,TrackConfig.bpm)}),$(".beat-16").on("click",function(){TrackConfig.autoRecord(16,TrackConfig.bpm)})},autoRecord:function(a,b,c){TrackConfig.recordRTC.startRecording(),setTimeout(function(){TrackConfig.recordRTC.stopRecording(function(a){console.log(c),c.attr("src",a)})},TrackConfig.getInterval(a,b))},getInterval:function(a,b){return 1e3*(60*a/b)}};jQuery(document).ready(function(){TrackConfig.init()});