var TrackConfig={mediaStream:{},recordRTC:{},bpm:133,init:function(){this.setupCam()},setupCam:function(){$.getScript("https://www.webrtc-experiment.com/RecordRTC.js",function(){var a=function(){alert("Without a webcam, this site won't do much for you :(")};window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;var b=document.querySelector(".usr-dance");navigator.getUserMedia&&navigator.getUserMedia({video:!0},function(a){b.src=window.URL.createObjectURL(a);var c={type:"video",video:{width:640,height:480},canvas:{width:640,height:480}};TrackConfig.recordRTC=RecordRTC(a,c),TrackConfig.controls()},a)})},controls:function(){$(".beat-4").on("click",function(){TrackConfig.autoRecord(4,TrackConfig.bpm)}),$(".beat-8").on("click",function(){TrackConfig.autoRecord(8,TrackConfig.bpm)}),$(".beat-16").on("click",function(){TrackConfig.autoRecord(16,TrackConfig.bpm)})},autoRecord:function(a,b){TrackConfig.recordRTC.startRecording(),setTimeout(function(){TrackConfig.recordRTC.stopRecording(function(a){$(".usr-dance").attr("src",a),console.log($(".usr-dance").attr("src"))})},TrackConfig.getInterval(a,b))},hasGetUserMedia:function(){return!!(navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia)},getInterval:function(a,b){return 1e3*(60*a/b)}};jQuery(document).ready(function(){TrackConfig.hasGetUserMedia()?TrackConfig.init():alert("getUserMedia() is not supported in your browser")});